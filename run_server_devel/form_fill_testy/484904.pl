#!/usr/local/bin/perl
use strict;
use lib "/common";
use LWP;


my $browser = LWP::UserAgent->new;
  
my $sequence = 'GTGACGAGGAGGAAGAAAGAGTGCGGTTGTTTTGTTTGACACTTCTTTTCTTTCTCCTCCAACGGTCCAACTTTGACTCTCTCTTCTCTTCTCTGAAAATTCTTCTATTCATTCATCTTCCTATCTTTCCCATGGAAGTGGAACAACAACAATATCTTCTCCAATTTCTCTAACCCTAAATTAACCGCTTCACCGCACAATTTCATATTTCCTTTCTCTCTTTGATCGGTTATCATGTCCGTTTTGGTTGTAACCGCCATGGATTTCGCCGTCCTCGGTTTTCTTATTCCCTCGCTCTGGGAGATCGAAGTCGCTTTCGCTGCCTCGCTTTTCGTTATTCTCGCGTATTGGTTCTTCACATTTAGAATCGCTGACCGTCACTCCGATCGATCACTTTCGGAAAATTCCGCCGGTGATTCCGCCGACGATAAAGTCAAGATTGGCCAGTCAAGAGGAGATTCTCAAGCCGGTTCGGCGTACCTGATTAAGTTAGAACTATTGGCTGCTAAAAATCTGATAGCTGCAAATTTAAATGGCACATCGGATCCTTACACCATCATCACATGCGGCAATGAAAAGCGATTCAGTTCCATGGTCCCTGGTTCAAGAAATCCAATGTGGGGCGAAGAGTTCAATTTTTCTGTCGATGAACTTCCTGTCCAGATCAATGTCACAATTTATGATTGGGATATAATTTGGAAAAGTGCTGTTCTTGGTTCAGTGACCGTTCCAGTTGAAAGTGAAGGTCAAACTGGTGCAGTGTGGCATACTTTGGACAGCCCATCAGGGCAGGTTTGTCTTCATATAAAAACAGAAAAAATGTCTGCAAATTCTGCCAGGATAAATGGTTATGGCGGAGCCAACACTCGAAGAAGGATACCCTTGGAAAAACAGGAACCCACAGTAGTCCATCAAAAGCCAGGACCTCTTCAAACGATATTTGAGCTTCATCCAGATGAGGTTGTTGATCATAGTTACTCTTGTGCACTTGAAAGGTCATTCTTGTACCATGGTCGTATGTATGTCTCAACATGGCACATTTGTTTCCATTCCAATGTGTTCTCGAAGCAAATGAAGGTGCTTATTCCGTTTGAAGATATAGATGAGATTCGAAGGAGTCAACATGCATTTATTAATCCTGCTATAACAATTATTCTTCGTATGGGTGCCGGTGGACATGGTGTCCCTCCTTTGGGAAGTCCTGATGGTAGAGTCAGATATAAGTTTGCGTCATTTTGGAACAGGAATCATGCAGTTAGAAGTCTACAACGTGCTGTAAAGAACTTCCGTGAAATGTTGGAAACTGAGAAGAAGGAAAATGCAGAGTCAGAATTGCGTGCACATAGCAGTTCTGTTAGACGAAGTAACATAATGGATAAGGTTCCCGAAACCAGCATGCCAAAAGCTGGAAAACGTCAAACTTTTATCAAAGAAGAGGCTTTAGTTGGTATATACAATGATGTTTTCCCCTGCACAGCAGAGCAGTTTTTTAACTTATTGTTAAAGGACGATTCAAAATTTACTAGCAAGTATCGTTCAGCACGAAAGGATACTAATCTTGTGATGGGACAATGGCATACAGCAGAAGAATATGACGGTCAAGTCCGGGAGATAACCTTCAGATCCCTTTGTAACAGCCCTATGTGCCCGCCAGACACAGCCATTACTGAGTGGCAACATGTTGTTCTATCATCTGACAAGAAAAACCTGGTGTTTGAGACTGTGCAACAGGCACACGATGTTCCACTCGGGTCCTGTTTTGAGGTGCACTGTAAATGGGGTTTGGAGACAACTGGTGAAAGTTCATGTACTCTGGACATAAGAGTGGGTGCACATTTCAAGAAATGGTGTGTGATGCAATCCAAAATAAAATCAGGGGCAATCAATGAGTACAAGAAAGAAGTTGATGTGATGTTAGATGTTGCTCGTTCATATATAAAGCCGCATACTTCTGATGACGAGAATGATAAGGCATCTTCGCCCCCTGCGGCAACTTTGGAAAATAAATTTTTCTGTGTAACCTTAGATTAGGACTTTGTTGGTCTGTGCAATATTGTAACTTTCCTTCTCTTAAGTTATTTATTTATTCTTGCAACACAGCGCCCAAAGCCATGTATATTTATTTTGATGCACAGTTGGTTTTTGTCTTGTGTATCTCTGTGGGTAACTTG';
  

my $URL = "http://www.arabidopsis.org/Blast/";
#BLASTX:NT query, AA db  ->blastx 
#AGI Proteins (Protein)	 ->ATH1_pep
#query sequence			 ->QueryText
my $response = $browser->post( $URL,
	[ 'Algorithem' => 'blastn', 
	  'BlastTargetSet' => 'ATH1_pep',
	  'QueryText' => $sequence, 
	  'ReplyFormat' =>'TEXT',	
	  'value' => 'Run Blast',
	]
);

my $page = "page.html";
open(OUT,">$page") or die "can't open ", $page;
print OUT $response->content;  
close(OUT);
